# --- Git paging through delta ---
[pager]
    diff = delta
    show = delta
    log  = delta

[interactive]
    diffFilter = delta --color-only

[core]
    pager = delta
    excludesFile = ~/.config/git/ignore
    commitGraph = true
    autocrlf = false
    filemode = false

# --- Diff behavior ---
[diff]
    context = 10
    colorMoved = no
    algorithm = histogram
    tool = vscode

[difftool]
    prompt = false

[difftool "vscode"]
    cmd = code --wait --diff $LOCAL $REMOTE
    trustExitCode = true

[difftool "nvimdiff"]
    cmd = nvim -f -d "$LOCAL" "$REMOTE"

[merge]
    conflictstyle = diff3
    tool = vscode

[mergetool]
    prompt = false

[mergetool "vscode"]
    cmd = code --wait --merge $LOCAL $REMOTE $BASE $MERGED
    trustExitCode = true

[mergetool "nvimdiff3"]
    cmd = nvim -f -d "$LOCAL" "$MERGED" "$REMOTE"
    trustExitCode = false

# --- Delta styling ---
[delta]
    file-added-label   = "  "
    file-modified-label= "  "
    file-removed-label = "  "
    file-renamed-label = "  "
    file-copied-label  = "  "

    commit-style = yellow bold
    commit-decoration-style = bold yellow ol
    file-style = purple bold
    file-decoration-style = purple bold ul
    right-arrow = "  "

    # hunk-header-style = file
    hunk-header-style = line-number
    hunk-header-decoration-style = blue ul

    # Be explicit for TUIs like LazyGit
    dark = true                                                   # better than 'light=false' under TUIs
    true-color = always                                             # safer than 'always' unless your whole stack is 24‑bit
    navigate = true                                               # n / N to jump
    side-by-side = false
    line-numbers = true

    syntax-theme = "Visual Studio Dark+"                                   # Fallback if the custom theme cache isn't built yet

# Optional: enable a feature you already defined below
[delta]
    features = tokyonight

# Optional named feature you can toggle via: DELTA_FEATURES=+side-by-side git diff
[delta "side-by-side"]
    side-by-side = true
    line-numbers = true

# Tokyo Night-aligned delta styling
[delta "tokyonight"]
    # File headers
    file-style = "#c0caf5 bold"
    file-decoration-style = "#292e42 box"

    # Hunk headers
    hunk-header-style = file line-number syntax
    hunk-header-file-style = "#7aa2f7"
    hunk-header-line-number-style = "bold #7aa2f7"
    hunk-header-decoration-style = "#292e42 box ul"

    # Commit meta
    commit-style = "bold #c0caf5"
    commit-decoration-style = "#292e42 box"

    # Grep integration
    grep-file-style = "#7aa2f7"
    grep-line-number-style = "#545c7e"

    # Misc
    zero-style = syntax
    whitespace-error-style = "#db4b4b reverse"

    line-numbers-left-style = "#545c7e"
    line-numbers-right-style = "#545c7e"
    line-numbers-zero-style = "#545c7e"
    line-numbers-plus-style = "#9ece6a dim"   # additions → Tokyo Night green, dimmed
    line-numbers-minus-style = "#f7768e dim"  # deletions → Tokyo Night red, dimmed
    line-numbers-left-format = ""
    line-numbers-right-format = "{np:<4}"

    plus-style = "syntax #20432bff"
    plus-emph-style = "syntax #2c5a3aff"
    plus-non-emph-style = "syntax #17311fff"
    minus-style = "syntax #532727ff"
    minus-emph-style = "syntax #683131ff"
    minus-non-emph-style = "syntax #3f1f1fff"

[pager]    # keep these for safety even with core.pager
    diff = delta
    show = delta
    log = delta

[index]
    threads = 10

[pack]
    threads = 0

[gc]
    writeCommitGraph = true

[fetch]
    writeCommitGraph = true

[feature]
    manyFiles = true

[maintenance]
    strategy = incremental

[protocol "sso"]
    allow = always

[branch]
    autosetuprebase = always

[include]
    path = ~/.gitconfig-local
